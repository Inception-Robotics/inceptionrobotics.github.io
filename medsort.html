<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medsort</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="flex-container">
        <header id="navbar" class="light-theme">
            <div class="container navbar-container">
                <a href="index.html" class="logo">
                    <img src="images/inception-robotics-logo.png" alt="Inception Robotics">
                </a>
                <nav>
                    <a href="medsort.html">MedSort &#8482;</a>
                    <a href="defense.html">Defense Solutions</a>
                    <a href="team.html">Team</a>
                </nav>
            </div>
        </header>

        <main class="main">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="container">
                    <div class="flex-center space-y-8">
                        <div class="space-y-4 max-w-3xl">
                            <h1>Medsort</h1>
                            <p class="subtitle">
                                Cost-effective, portable device that automates expiry detection, medicine
                                identification, sorting, and inventory reporting for returned pharmacy supplies.
                            </p>
                        </div>

                        <!-- CTA Buttons -->
                        <div class="button-container">
                            <button class="button cta-button button-primary"
                                onclick="window.location.href='mailto:team@inceptionrobotics.com'">
                                Schedule a Demo 
                                <svg class="ml-2" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M5 12h14"></path>
                                    <path d="m12 5 7 7-7 7"></path>
                                </svg>
                            </button>
                            <!-- <button class="button cta-button button-secondary"
                                onclick="window.location.href='https://www.youtube.com/watch?v=HrP_LFB5AQU'">
                                <svg class="mr-2" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                </svg>
                                Watch Demo
                            </button> -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Video Scroll Section -->
            <div class="video-scroll-wrapper">
                <section class="video-scroll-section">
                    <div class="video-scroll-inner">
                        <!-- Image overlay shown until scroll/video starts -->
                        <div id="video-scroll-image-overlay">
                            <img src="images/medsort.png" alt="Medsort" class="video-scroll-image" />
                            <div class="scroll-below-text"
                                style="margin-top: 2vh; display: flex; flex-direction: column; align-items: center;">
                                <button id="scroll-below-btn"
                                    style="display: flex; align-items: center; gap: 0.5em; background: none; border: none; cursor: pointer; box-shadow: 0 4px 16px 0 rgba(0,0,0,0.18); border-radius: 50px; padding: 0.4em 1em;">
                                    <span style="font-size: 1.1em; font-weight: 500; color: #222;">Scroll below</span>
                                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="black"
                                        stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
                                        style="display:block; transform: rotate(30deg);">
                                        <path d="M12 5v14M19 12l-7 7-7-7" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <video id="bgVideo" class="video-scroll" preload="auto" muted playsinline autoplay webkit-playsinline="true">
                            <source src="https://media.githubusercontent.com/media/Inception-Robotics/ir/refs/heads/main/medsort.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                        <div class="video-scroll-overlay content">
                            <div class="video-scroll-steps">
                                <div class="text-heading" data-start-time="0" data-end-time="3">Unsorted Items</div>
                                <div class="text-heading" data-start-time="3" data-end-time="8">Load bin</div>
                                <div class="text-heading" style="color: white;" data-start-time="8" data-end-time="15">
                                    Start Medsort</div>
                                <div class="text-heading" data-start-time="15" data-end-time="22">Sort Medicines</div>

                                <div class="text-heading" data-start-time="22" data-end-time="28">Pick a medicine</div>
                                <div class="text-heading" style="color: white;" data-start-time="28" data-end-time="37">
                                    Scan details</div>
                                <div class="text-heading" style="color: white;" data-start-time="37" data-end-time="43">
                                    Place in sorted bin</div>
                                <div class="text-heading" data-start-time="43" data-end-time="51">Sorted Items</div>
                                <div class="text-heading" data-start-time="51" data-end-time="59">Report</div>
                                <div class="video-scroll-stepbar">
                                    <div class="video-scroll-stepbar-track"></div>
                                    <div class="video-scroll-stepbar-thumb"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Contact Section -->
            <section class="contact-section">
                <div class="container">
                    <div class="grid-container">
                        <div class="contact-info">
                            <h2 class="contact-heading">Get in Touch</h2>
                            <p class="contact-text">
                                We're here to help with your pharmacy returns handing. Reach out to our team today.
                            </p>
                            <div class="contact-details">
                                <div class="contact-item">
                                    <svg class="contact-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path
                                            d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z">
                                        </path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                    <div>
                                        <h3 class="contact-label">Email</h3>
                                        <p class="contact-value">team@inceptionrobotics.ai</p>
                                    </div>
                                </div>
                                <div class="contact-item">
                                    <svg class="contact-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                        <circle cx="12" cy="10" r="3"></circle>
                                    </svg>
                                    <div>
                                        <h3 class="contact-label">Address</h3>
                                        <p class="contact-value">4467 Technology Dr, #3101, College Park, MD, 20740</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Copyright Section -->
            <section class="copyright-section">
                <div class="container">
                    <p>&copy; 2025 Inception Robotics. All rights reserved.</p>
                </div>
            </section>
        </main>
    </div>
</body>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const video = document.getElementById('bgVideo');
        const textHeadings = document.querySelectorAll('.video-scroll-overlay .text-heading');
        const imgOverlay = document.getElementById('video-scroll-image-overlay');
        let videoDuration = 0;
        let isVideoReady = false;

        const stepbarThumb = document.querySelector('.video-scroll-stepbar-thumb');
        const stepbarTrack = document.querySelector('.video-scroll-stepbar-track');
        const steps = Array.from(document.querySelectorAll('.video-scroll-steps .text-heading'));

        function updateStepbar(targetTime) {
            if (!steps.length || !stepbarThumb || !stepbarTrack || !videoDuration) return;
            // Find active step
            let activeIdx = 0;
            steps.forEach((step, idx) => {
                const start = parseFloat(step.dataset.startTime);
                const end = parseFloat(step.dataset.endTime);
                if (targetTime >= start && targetTime <= end) {
                    activeIdx = idx;
                }
            });
            // Calculate thumb width and position
            const stepCount = steps.length;
            const percent = ((activeIdx + 1) / stepCount) * 100;
            stepbarThumb.style.width = percent + '%';
        }

        function setScrollHeight() {
            if (videoDuration > 0) {
                document.querySelector('.video-scroll-wrapper').style.height = `${Math.max(100 * videoDuration, window.innerHeight)}px`;
            }
        }

        function handleScroll() {
            if (!isVideoReady) return;
            const wrapper = document.querySelector('.video-scroll-wrapper');
            const rect = wrapper.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            if (rect.top <= 0 && rect.bottom > windowHeight) {
                const scrollable = rect.height - windowHeight;
                const scrollPassed = -rect.top;
                const scrollPercentage = Math.min(Math.max(scrollPassed / scrollable, 0), 1);
                const targetTime = Math.min(videoDuration * scrollPercentage, videoDuration);
                video.currentTime = targetTime;
                textHeadings.forEach(heading => {
                    const startTime = parseFloat(heading.dataset.startTime);
                    const endTime = parseFloat(heading.dataset.endTime);
                    if (targetTime >= startTime && targetTime <= endTime) {
                        heading.classList.add('visible');
                    } else {
                        heading.classList.remove('visible');
                    }
                });
                updateStepbar(targetTime);
                // Hide overlay as soon as user scrolls (targetTime > 0.01)
                if (imgOverlay) {
                    if (targetTime > 0.001) {
                        imgOverlay.style.opacity = 0;
                        imgOverlay.style.pointerEvents = 'none';
                    } else {
                        imgOverlay.style.opacity = 1;
                        imgOverlay.style.pointerEvents = 'auto';
                    }
                }
            } else if (rect.top > 0) {
                video.currentTime = 0;
                textHeadings.forEach(h => h.classList.remove('visible'));
                updateStepbar(0);
                if (imgOverlay) {
                    imgOverlay.style.opacity = 1;
                    imgOverlay.style.pointerEvents = 'auto';
                }
            } else if (rect.bottom <= windowHeight) {
                video.currentTime = videoDuration;
                textHeadings.forEach(h => h.classList.remove('visible'));
                updateStepbar(videoDuration);
                if (imgOverlay) {
                    imgOverlay.style.opacity = 0;
                    imgOverlay.style.pointerEvents = 'none';
                }
            }
        }

        window.addEventListener('scroll', handleScroll);
        window.addEventListener('resize', setScrollHeight);
        video.addEventListener('loadedmetadata', () => {
            videoDuration = video.duration;
            isVideoReady = true;
            setScrollHeight();
            video.pause();
            video.currentTime = 0;
        });
        video.addEventListener('error', (e) => {
            console.error("Video error:", e);
        });

        // Add scroll-below click handler
        const scrollBtn = document.getElementById('scroll-below-btn');
        if (scrollBtn) {
            scrollBtn.addEventListener('click', (e) => {
                e.preventDefault();
                // Scroll to the video section so it's at the top of the viewport
                const wrapper = document.querySelector('.video-scroll-wrapper');
                if (wrapper) {
                    wrapper.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        }
    });

    // Add bounce animation for scroll nudge and smooth overlay transitions
    const style = document.createElement('style');
    style.innerHTML = `@keyframes bounce {0%{transform:translateY(0);}100%{transform:translateY(16px);}}`;
    document.head.appendChild(style);
</script>

</html>